<div
  class="bg-modal p-3 py-4 rounded shadow-sm"
  *ngIf="data && nouvellelicence"
>
  <div class="border p-1 rounded-3">
    <h5 class="pt-2" style="color: #313131; font-size: 22px; font-weight: 600">
      {{ nouvellelicence.auto_ecole }}
    </h5>
    <div class="card-body">
      <div class="row">
        <div class="col">
          <div class="mb-3">
            <div class="fw-semibold h6">IFU</div>
            {{ nouvellelicence?.autoecole.num_ifu }}
          </div>
        </div>
        <div class="col">
          <div class="mb-3">
            <div class="fw-semibold h6">Département</div>
            {{ nouvellelicence?.autoecole.departement.name }}
          </div>
        </div>
        <div class="col">
          <div class="mb-3">
            <div class="fw-semibold h6">Commune</div>
            {{ nouvellelicence?.autoecole.commune.name }}
          </div>
        </div>
        <div class="col">
          <div class="mb-3">
            <div class="fw-semibold h6">Adresse</div>
            {{ nouvellelicence?.autoecole.adresse }}
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <div class="mb-3">
            <div class="fw-semibold h6">N° de téléphone professionnel</div>
            {{ nouvellelicence?.autoecole.phone }}
          </div>
        </div>
        <div class="col-md-3">
          <div class="mb-3">
            <div class="fw-semibold h6">Email professionnel</div>
            {{ nouvellelicence?.autoecole.email }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <h5 class="my-3">Moniteurs</h5>
      <div class="card bg-transparent border">
        <div class="card-body">
          <div
            class="row"
            *ngFor="
              let moniteur of nouvellelicence?.moniteurs_info;
              let i = index
            "
          >
            <div class="col">
              <div class="mb-3">
                {{ moniteur.nom }}
              </div>
            </div>
            <div class="col">
              <div class="mb-3">
                {{ moniteur.prenoms }}
              </div>
            </div>
            <div class="col">
              <div class="mb-3">
                {{ moniteur.telephone }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6">
      <h5 class="my-3">Véhicules</h5>
      <div class="card bg-transparent border">
        <div class="card-body">
          <div class="row" *ngFor="let vehicule of vehicules; let i = index">
            <div class="col">
              <div class="mb-3">
                Immatriculation: {{ vehicule.immatriculation }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <h5 class="my-3">Les fiches jointes</h5>
      <div class="card bg-transparent border">
        <div class="card-body">
          <div class="row">
            <div class="col" *ngIf="nouvellelicence?.fiche?.carte_grise">
              <div class="mb-3">
                <div class="fw-semibold h6">
                  Copie de la carte grise du ou des véhicules
                </div>

                <div class="d-flex gap-3">
                  <div *ngFor="let fic of nouvellelicence?.fiche?.carte_grise">
                    <a
                      [href]="assets(fic)"
                      target="_blank"
                      style="color: black"
                    >
                      <div class="prev-eye text-center">
                        <div class="overlay"></div>
                        <app-icon icon="eye"></app-icon>
                        <img
                          src="assets/images/pdf.png"
                          style="width: 150px; height: 70px"
                          alt="Aperçu de l'image"
                          class="img-fluid"
                        />
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="col-md-4"
              *ngIf="nouvellelicence?.fiche?.photo_vehicules"
            >
              <div class="mb-3">
                <div class="fw-semibold h6">Photo du ou des véhicule(s)</div>

                <div class="d-flex gap-3">
                  <div
                    *ngFor="let fic of nouvellelicence?.fiche?.photo_vehicules"
                  >
                    <a
                      [href]="assets(fic)"
                      target="_blank"
                      style="color: black"
                    >
                      <div class="prev-eye text-center">
                        <div class="overlay"></div>
                        <app-icon icon="eye"></app-icon>
                        <img
                          [src]="assets(fic)"
                          style="width: 150px; height: 70px"
                          alt="Aperçu de l'image"
                          class="img-fluid"
                        />
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="col-md-4"
              *ngIf="nouvellelicence?.fiche?.assurance_visite"
            >
              <div class="mb-3">
                <div class="fw-semibold h6">
                  Copie de l'attestation d'assurance et des visites technique en
                  cours de validité
                </div>
                <div class="d-flex gap-3">
                  <div
                    *ngFor="let fic of nouvellelicence?.fiche?.assurance_visite"
                  >
                    <a
                      [href]="assets(fic)"
                      target="_blank"
                      style="color: black"
                    >
                      <div class="prev-eye text-center">
                        <div class="overlay"></div>
                        <app-icon icon="eye"></app-icon>
                        <img
                          src="assets/images/pdf.png"
                          style="width: 150px; height: 70px"
                          alt="Aperçu de l'image"
                          class="img-fluid"
                        />
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="mt-3" *ngIf="page == 'pending'">
                <button class="btn btn-primary" (click)="onValidate()">
                  Valider
                </button>
                <button class="btn btn-danger ms-2" (click)="onRejected()">
                  Rejeter le dossier
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  [id]="'suivi-' + data.id"
  tabindex="-1"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  role="dialog"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-scrollable modal-dialog-centered"
    role="document"
  >
    <div class="modal-content rounded-3">
      <div class="modal-header">
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body text-center">
        <img [src]="assets(previewUrl)" class="w-block img-fluid mx-auto" />
      </div>
    </div>
  </div>
</div>
