<div class="mt-3 filter-box p-2">
  <div class="row">
    <div class="col">
      <div class="mb-3">
        <select
          class="form-select"
          [(ngModel)]="filters.categorie_permis_id"
          name="categorie_permis_id"
          (change)="refresh()"
        >
          <option [value]="0" selected>Tous les permis</option>
          <option [value]="pm.id" *ngFor="let pm of permis">
            {{ pm.name }}
          </option>
          >
        </select>
      </div>
    </div>
    <div class="col">
      <div class="mb-3">
        <select
          class="form-select"
          [(ngModel)]="filters.langue_id"
          name="langue_id"
          (change)="refresh()"
        >
          <option [value]="0" selected>Tous les langues</option>
          <option [value]="lg.id" *ngFor="let lg of langues">
            {{ lg.name }}
          </option>
        </select>
      </div>
    </div>
  </div>
</div>

<div class="row p-2">
  <div class="col-md-8">
    <div class="d-flex">
      <button class="btn btn-light me-2" (click)="refresh()">Acutaliser</button>
      <input
        type="text"
        name="search"
        class="form-control rounded-1"
        placeholder="Taper un NPI"
        [(ngModel)]="filters.search"
      />
      <button
        class="btn btn-secondary rounded-1 ms-1"
        type="button"
        (click)="refresh()"
        [disabled]="!filters.search"
      >
        <app-icon icon="search"></app-icon>
      </button>
    </div>
  </div>
  <div class="col text-end">
    <button
      class="btn btn-secondary rounded-1 ms-1"
      type="button"
      (click)="download()"
    >
      <app-icon icon="download"></app-icon>
    </button>
  </div>
</div>
<ul class="list-group" *ngIf="onLoadingDossier">
  <li class="list-group-item bd-color-0 p-2 text-center">
    Chargement des dossiers en cours ...
  </li>
</ul>
<ul class="list-group">
  <ng-container
    *ngFor="let candidat of monitorises | paginate : paginateArgs()"
  >
    <li class="list-group-item bd-color-0 p-2">
      <app-fiche-candidat
        [download-fiche]="true"
        [candidat]="candidat"
      ></app-fiche-candidat>
    </li>
  </ng-container>
</ul>
<div class="p-3" *ngIf="canPaginate && paginate_data">
  <app-pagination
    *ngIf="paginate_data.total > filters.perPage"
    [total]="paginate_data.total"
    (pageChange)="paginate($event)"
    [pageNumber]="filters.perPage"
    [perPage]="filters.perPage"
  ></app-pagination>
</div>
<ul class="list-group" *ngIf="!onLoadingDossier && !monitorises.length">
  <li class="list-group-item bd-color-0 p-2 text-center">Aucun candidat</li>
</ul>
